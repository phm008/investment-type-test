<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>나는 어떤 투자 유형일까? 🤔 | 나노바나나</title>
  <meta name="description" content="8문항으로 알아보는 내 투자 성격 유형. 기도메타? 손절귀신? 껄무새? 지금 바로 테스트해보세요!" />
  <meta property="og:title" content="나는 어떤 투자 유형일까? 🤔" />
  <meta property="og:description" content="8문항으로 알아보는 내 투자 성격 유형 테스트!" />
  <meta property="og:type" content="website" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700;900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>

  <!-- ===== START SCREEN ===== -->
  <div id="screen-start" class="screen active">

    <!-- 언어 토글 -->
    <div class="lang-toggle">
      <button class="lang-btn active" id="btn-kr" onclick="setLang('kr')">KR</button>
      <button class="lang-btn" id="btn-en" onclick="setLang('en')">EN</button>
    </div>

    <!-- 본문 -->
    <div class="start-content">
      <div class="start-emoji">💸</div>
      <h1 class="start-title" data-i18n="startTitle">숨겨진 나의<br />투자 유형 찾아보기</h1>
      <p class="start-sub" data-i18n="startSub">8문항으로 3분만에 알아보는 나의 투자 성격.</p>

      <div class="start-illustration">
        <div class="comic-bubble">
          <p class="start-hook" data-i18n="startHook">설마 나만 맨날 고점에 사는 거 아니겠지...?</p>
        </div>
        <img class="main-character-img" id="main-character-img" src="memes/main_character.png" alt="익살스러운 투자자 캐릭터" />
      </div>

      <button class="btn-primary" id="btn-start" onclick="startTest()">
        테스트 시작하기 🚀
      </button>
      <p class="start-meta" data-i18n="startMeta">총 8문항 · 약 3분 소요</p>
    </div>

  </div>

  <!-- ===== QUESTION SCREEN ===== -->
  <div id="screen-question" class="screen">

    <!-- 헤더 -->
    <div class="question-header">
      <button class="btn-back" id="btn-back" onclick="goBack()">←</button>
      <div class="progress-wrap">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <span class="progress-label" id="progress-label">1 / 8</span>
      </div>
    </div>

    <!-- 질문 영역 -->
    <div class="question-body">
      <span class="q-badge" id="q-badge">Q1</span>
      <p class="q-text" id="q-text"></p>
    </div>

    <!-- 보기 -->
    <div class="choices-list" id="choices-list">
      <!-- JS로 주입 -->
    </div>

  </div>

  <!-- ===== RESULT SCREEN ===== -->
  <div id="screen-result" class="screen">

    <div class="result-scroll">

      <!-- 타이틀 -->
      <div class="result-title-wrap">
        <p class="result-eyebrow">🎉 결과 나왔다!</p>
        <p class="result-desc" data-i18n="resultDesc">내 투자 성격은 바로...</p>
      </div>

      <!-- 메인 결과 카드 -->
      <div class="result-card" id="result-card">
        <div class="result-emoji" id="result-emoji">🙏</div>
        <h2 class="result-name" id="result-name">기도메타</h2>
        <p class="result-tagline" id="result-tagline">분석은 끝났고… 이제 기도 시작.</p>
        <div class="result-keywords" id="result-keywords"></div>
        <div class="result-mix hidden" id="result-mix">
          <div class="mix-row">
            <span class="mix-label" data-i18n="primaryTypeLabel">주유형</span>
            <span class="mix-value" id="result-primary-name">🙏 기도메타</span>
          </div>
          <div class="mix-row">
            <span class="mix-label" data-i18n="secondaryTypeLabel">보조유형</span>
            <span class="mix-value" id="result-secondary-name">😢 껄무새</span>
          </div>
          <div class="mix-row confidence-row" id="confidence-wrap">
            <span class="mix-label" data-i18n="confidenceLabel">신뢰도</span>
            <span class="confidence-badge medium" id="confidence-badge">Medium</span>
          </div>
          <p class="confidence-hint hidden" id="confidence-hint"></p>
        </div>

        <!-- 밈 이미지 영역 -->
        <div class="meme-frame" id="meme-frame">
          <img class="meme-img" id="meme-img" src="" alt="meme" />
          <div class="meme-placeholder" id="meme-placeholder">
            <span class="meme-ph-emoji" id="meme-ph-emoji">😂</span>
          </div>
        </div>
      </div>

      <!-- 정반대 유형 카드 -->
      <div class="opposite-card" id="opposite-card">
        <p class="opposite-label" data-i18n="oppositeLabel">🆚 나의 정반대 유형</p>
        <div class="opposite-type-row">
          <span class="opposite-emoji" id="opposite-emoji">🕯️</span>
          <p class="opposite-name" id="opposite-name">봉차트도사</p>
        </div>
        <div class="meet-bubble">
          <span class="meet-tag" data-i18n="meetTag">우리 둘이 만나면?? 🤝</span>
          <p class="opposite-meet" id="opposite-meet"></p>
        </div>
      </div>

      <!-- 공유 섹션 -->
      <div class="share-section">
        <p class="share-title" data-i18n="shareTitle">내 결과 공유하기 📤</p>
        <div class="share-buttons">
          <!-- 카카오톡 (모바일 Web Share + fallback) -->
          <button class="share-btn kakao" id="btn-share-kakao" onclick="shareKakao()">
            <span class="share-icon">💬</span>
            <span>카카오톡</span>
          </button>
          <!-- X (Twitter) -->
          <button class="share-btn twitter" onclick="shareTwitter()">
            <span class="share-icon">𝕏</span>
            <span>X</span>
          </button>
          <!-- WhatsApp -->
          <button class="share-btn whatsapp" onclick="shareWhatsapp()">
            <span class="share-icon">📱</span>
            <span>WhatsApp</span>
          </button>
          <!-- Facebook -->
          <button class="share-btn facebook" onclick="shareFacebook()">
            <span class="share-icon">f</span>
            <span>Facebook</span>
          </button>
          <!-- 링크 복사 -->
          <button class="share-btn copylink" onclick="shareResult()">
            <span class="share-icon">🔗</span>
            <span data-i18n="copyLink">링크 복사</span>
          </button>
        </div>
      </div>

      <!-- 다시하기 -->
      <div class="retry-wrap">
        <button class="btn-retry" onclick="resetTest()" data-i18n="retry">🔄 다시하기</button>
      </div>

      <!-- 댓글창 섹션 -->
      <div class="comments-section" id="comments-section">
        <h3 class="comments-title">방명록 남기기 📝</h3>

        <form id="comment-form" onsubmit="submitComment(event)">
          <div class="comment-inputs">
            <input type="text" id="comment-nickname" placeholder="닉네임" required maxlength="10">
            <input type="password" id="comment-password" placeholder="비밀번호(삭제용)" required maxlength="20">
          </div>
          <div class="comment-textarea-wrap">
            <textarea id="comment-content" placeholder="결과 어떠셨나요? 자유롭게 남겨주세요!" required rows="3"></textarea>
            <button type="submit" class="btn-submit-comment">등록</button>
          </div>
        </form>

        <div class="comments-list" id="comments-list">
          <div class="comments-loading">댓글을 불러오는 중...</div>
        </div>
      </div>

    </div>
  </div>

  <!-- 공유 토스트 -->
  <div class="toast" id="toast">🔗 링크가 복사됐어요!</div>

  <script src="data.js"></script>
  <script src="app.js"></script>
</body>

</html>